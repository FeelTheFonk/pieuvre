// Pieuvre â€” Status Bar
//
// Barre d'Ã©tat en bas de fenÃªtre.

import { Tokens } from "../tokens.slint";
import { AppState, SystemInfo } from "../globals.slint";

export component StatusBar inherits Rectangle {
    height: Tokens.statusbar-height;
    background: Tokens.surface-color;
    border-width: 1px;
    border-color: Tokens.border-color;
    
    HorizontalLayout {
        padding-left: Tokens.spacing-md;
        padding-right: Tokens.spacing-md;
        alignment: space-between;
        
        // Left: Last action
        HorizontalLayout {
            spacing: Tokens.spacing-sm;
            alignment: start;
            
            if AppState.last-action != "": Text {
                text: "âœ“";
                color: Tokens.success-color;
                font-size: Tokens.font-size-xs;
                vertical-alignment: center;
            }
            
            Text {
                text: AppState.last-action != "" ? AppState.last-action : "PrÃªt";
                color: Tokens.text-secondary;
                font-size: Tokens.font-size-xs;
                vertical-alignment: center;
            }
        }
        
        // Center: Selection count (if applicable)
        if AppState.current-view == "optimizations" && AppState.selected-count > 0: Rectangle {
            height: 100%;
            
            HorizontalLayout {
                spacing: Tokens.spacing-xs;
                alignment: center;
                
                Text {
                    text: AppState.selected-count + " sÃ©lectionnÃ©e(s)";
                    color: Tokens.primary-color;
                    font-size: Tokens.font-size-xs;
                    font-weight: 500;
                    vertical-alignment: center;
                }
            }
        }
        
        // Right: System info
        HorizontalLayout {
            spacing: Tokens.spacing-md;
            alignment: end;
            
            // Device type
            Text {
                text: AppState.is-laptop ? "ðŸ’» Laptop" : "ðŸ–¥ Desktop";
                color: Tokens.text-muted;
                font-size: Tokens.font-size-xs;
                vertical-alignment: center;
            }
            
            // Separator
            Rectangle {
                width: 1px;
                height: 16px;
                background: Tokens.border-color;
            }
            
            // OS
            Text {
                text: SystemInfo.os-version + " (" + SystemInfo.build-number + ")";
                color: Tokens.text-muted;
                font-size: Tokens.font-size-xs;
                vertical-alignment: center;
            }
        }
    }
}
